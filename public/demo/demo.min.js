function start(){game=new Phaser.Game(1280,680,Phaser.CANVAS,"game",{preload:preload,create:create,update:update,render:render})}function preload(){game.stage.backgroundColor="#000",game.load.baseURL="/demo/",game.load.crossOrigin="anonymous",game.load.spritesheet("armadillo","images/armadillo-walk.png",250,120,23),game.load.image("background","images/background.png"),game.load.image("tumbleweed","images/tumbleweed.png"),game.load.image("floor","images/floor.png"),game.load.image("heart","images/heart.png"),game.load.image("scoreboard","images/scoreboard.png")}function create(){bg=game.add.sprite(0,0,"background"),bg2=game.add.sprite(4e3,0,"background"),ground=game.add.physicsGroup(),ground.create(0,640,"floor"),ground.setAll("body.immovable",!0),scoreboard=game.add.sprite(850,30,"scoreboard"),heart1=game.add.sprite(880,40,"heart"),heart2=game.add.sprite(940,40,"heart"),heart3=game.add.sprite(1e3,40,"heart"),armadillo=game.add.sprite(100,560,"armadillo"),armadillo.anchor.setTo(.5,.5),armadillo.animations.add("walk",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),armadillo.animations.add("jump",[20,21,22]),armadillo.animations.add("land",[22,21,20]),armadillo.animations.play("walk",40,!0),armadillo.angle=0,tw1=game.add.sprite(1500,610,"tumbleweed"),tw2=game.add.sprite(3700,600,"tumbleweed"),tw3=game.add.sprite(5100,590,"tumbleweed"),tw1.anchor.setTo(.5,.5),tw2.anchor.setTo(.5,.5),tw3.anchor.setTo(.5,.5),game.physics.arcade.enable(armadillo),game.physics.arcade.enable(tw1),game.physics.arcade.enable(tw2),game.physics.arcade.enable(tw3),game.physics.arcade.enable(ground),armadillo.body.collideWorldBounds=!0,armadillo.body.gravity.y=500,cursors=game.input.keyboard.createCursorKeys(),jumpButton=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);var a={font:"25px Montague",fill:"#603716",align:"right"};score=game.add.text(1150,70,updatedScore+" Points",a),score.anchor.setTo(.5)}function destroyTw1(){tw1.position.x=1280+1e3*Math.random(),tw1.position.y=610,health-=1}function destroyTw2(){tw2.position.x=1780+1e3*Math.random(),tw2.position.y=600,health-=1}function destroyTw3(){tw3.position.x=2280+1e3*Math.random(),tw3.position.y=590,health-=1}function updateText(){gameOver===!1?(updatedScore++,score.setText(updatedScore+" Points")):score.setText("Game over")}function restartGame(){health=3,gameOver=!1,updatedScore=0,game.state.restart()}function update(){game.physics.arcade.overlap(armadillo,tw1,destroyTw1),game.physics.arcade.overlap(armadillo,tw2,destroyTw2),game.physics.arcade.overlap(armadillo,tw3,destroyTw3),game.physics.arcade.collide(armadillo,ground),(jumpButton.isDown||jump)&&(armadillo.body.onFloor()||armadillo.body.touching.down)&&(armadillo.body.velocity.y=-450,armadillo.animations.play("walk",0,!1),armadillo.animations.play("jump",20,!1),airborn=!0,setTimeout(function(){armadillo.animations.play("land",20,!1),airborn=!1,armadillo.animations.play("walk",40,!0)},1850)),tiny&&(armadillo.scale.set(.7,.7),tiny=!1,setTimeout(function(){armadillo.scale.set(1,1)},3e3)),armadillo.body.velocity.x=0,(cursors.left.isDown||left)&&airborn===!1?armadillo.body.velocity.x=-250:(cursors.left.isDown||left)&&airborn===!0?armadillo.body.velocity.x=-350:(cursors.right.isDown||right)&&airborn===!1?armadillo.body.velocity.x=250:(cursors.right.isDown||right)&&airborn===!0&&(armadillo.body.velocity.x=350),tw1.position.x<-100&&(tw1.position.x=1280+1e3*Math.random()),tw2.position.x<-100&&(tw2.position.x=1280+1e3*Math.random()),tw3.position.x<-100&&(tw3.position.x=1280+1e3*Math.random()),tw1.position.x=tw1.position.x-4,tw2.position.x=tw2.position.x-7,tw3.position.x=tw3.position.x-3,tw1.angle+=-2,tw2.angle+=-2,tw3.angle+=-2,-4e3==bg.position.x&&(bg.position.x=4e3),-4e3==bg2.position.x&&(bg2.position.x=4e3),bg.position.x=bg.position.x-2,bg2.position.x=bg2.position.x-2,2===health&&heart1.kill(),1===health&&heart2.kill(),0===health&&(heart3.kill(),gameOver=!0,left=!1,right=!1,jump=!1,health=3,armadillo.kill(),setTimeout(function(){App.endGame(updatedScore)},1200)),updateText()}function render(){}var game,armadillo,cursors,jumpButton,bg,bg2,tw1,tw2,tw3,heart1,heart2,heart3,scoreboard,ground,score,updatedScore=0,airborn=!1,gameOver=!1,health=3;
