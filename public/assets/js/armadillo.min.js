function detectDevice(){/Android|webOS|iPhone|iPod|BlackBerry|iPad/i.test(navigator.userAgent)?$("#player").show():$("#host").show()}window.onload=function(){detectDevice()};var App,offset;jQuery(function(o){"use strict";var t={init:function(){t.socket=io.connect(),t.bindEvents()},bindEvents:function(){t.socket.on("connected",t.Connected),t.socket.on("gameCreated",t.gameCreated),t.socket.on("joined",t.joined),t.socket.on("clicked",t.clicked)},Connected:function(){App.socketId=t.socket.socket.sessionid},gameCreated:function(o){App.Host.startGame(o)},joined:function(o){App[App.role].changeLayout(o)},clicked:function(o){App.Host.clickAction(o)}};App={activeRoom:0,role:"",socketId:"",init:function(){App.bindEvents(),FastClick.attach(document.body)},endGame:function(t){o("#game").hide(),o("#getCode").hide(),o("#menu").hide(),o("#host").show(),o("#score").show(),o("#newScore").html(t+" Points")},restart:function(){restartGame(),o("#host").hide(),o("#game").show()},controller:function(o,t){App.$doc.on("touchstart",o,function(){App.Player.button(t)}),App.$doc.on("touchend",o,function(){App.Player.button(t)})},bindEvents:function(){App.$doc=o(document),App.$doc.on("click","#play",App.Host.createGame),App.$doc.on("click","#playAgain",App.restart),App.$doc.on("click","#join",App.Player.onJoin),App.controller("#button1",1),App.controller("#button2",2)},Host:{createGame:function(){t.socket.emit("createNewGame")},startGame:function(o){App.activeRoom=o.activeRoom,App.socketId=o.socketId,App.role="Host",App.Host.showCode()},showCode:function(){o("#menu").hide(),o("#getCode").show(),o("#code").html(App.activeRoom)},clickAction:function(o){var t={0:joystick,1:button1,2:button2};t[o.button]&&t[o.button](o.angle)},changeLayout:function(){o("#host").hide(),o("#game").show(),start()}},Player:{setNum:0,onJoin:function(){var e={activeRoom:o("#input").val()};t.socket.emit("JoinGame",e),App.role="Player"},changeLayout:function(e){t.socket.socket.sessionid===e.socketId&&(App.role="Player",App.activeRoom=e.activeRoom,o("#connect").hide(),o("#controller").show(),offset=o("#joystick").offset())},button:function(o,e){var n={activeRoom:App.activeRoom,button:o,angle:e};t.socket.emit("pressButton",n)}}},t.init(),App.init()}($));
