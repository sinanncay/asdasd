function calculateHour(t,o){var e,n,u=t-offset.top,c=o-offset.left;-12>c||-12>u||c>12||u>12||c>12||-12>u||-12>c||u>12?(cal=Math.round(180*Math.atan(u/c)/Math.PI*1e4)/1e4,e=0>u&&0>c?cal-180:u>1&&0>c?cal+180:cal,-60>e&&e>=-90?n=1:-30>e&&e>=-60?n=2:0>e&&e>=-30?n=3:30>e&&e>=0?n=4:60>e&&e>=30?n=5:90>e&&e>=60?n=6:120>e&&e>=90?n=7:150>e&&e>=120?n=8:180>e&&e>=150?n=9:-150>e&&e>=-180?n=10:-120>e&&e>=-150?n=11:-90>e&&e>=-120&&(n=12)):n=0,n!=current&&(App.Player.button(0,n),current=n)}!function(t){function o(t,o){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var e=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(o,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}if(t.support.touch="ontouchend"in document,t.support.touch){var e,n=t.ui.mouse.prototype,u=n._mouseInit,c=n._mouseDestroy;n._touchStart=function(t){var n=this;!e&&n._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,n._touchMoved=!1,o(t,"mouseover"),o(t,"mousemove"),o(t,"mousedown"))},n._touchMove=function(t){e&&(this._touchMoved=!0,o(t,"mousemove"))},n._touchEnd=function(t){e&&(o(t,"mouseup"),o(t,"mouseout"),this._touchMoved||o(t,"click"),e=!1)},n._mouseInit=function(){var o=this;o.element.bind({touchstart:t.proxy(o,"_touchStart"),touchmove:t.proxy(o,"_touchMove"),touchend:t.proxy(o,"_touchEnd")}),u.call(o)},n._mouseDestroy=function(){var o=this;o.element.unbind({touchstart:t.proxy(o,"_touchStart"),touchmove:t.proxy(o,"_touchMove"),touchend:t.proxy(o,"_touchEnd")}),c.call(o)}}}(jQuery);var current;$(function(){$("#joystick").draggable({revert:function(){return App.Player.button(0,0),!0},drag:function(){var t=document.getElementById("joystick").getBoundingClientRect();calculateHour(t.top,t.left)},axis:"x"})});
